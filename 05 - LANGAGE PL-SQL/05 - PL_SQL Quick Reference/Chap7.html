
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>Guide PL/SQL - Club d'entraide des d&#233;veloppeurs francophones</title>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <meta name="generator" content="developpez-com" />
  <link rel="stylesheet" type="text/css" href="./mainstyle.css" />
  <link rel="stylesheet" type="text/css" media="print" href="./printer.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="./article.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="./faq.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="./source.css" />
</head>
<body>
<table width="100%" cellspacing="4">
	<tr>
  	<td align="center">
    	<table width="100%" cellspacing="0" cellpadding="0">
     		<tr>
     			<td>
			      <table width="100%" cellspacing="11">
    	  			<tr>
        				<td>
          				<a href="http://www.developpez.com"><img src="images/logo.gif" alt="Accueil" /></a>
        				</td>
      				</tr>
      				<tr>
      					<td></td>
      				</tr>
      			</table>
    			</td>
  			</tr>
  			<tr>
    			<td>
						<table class="cachee" cellpadding="0" cellspacing="0" width="100%">
							<tr>
								<td class="iongl"><img src="images/bordg.gif" /></td>
								<td class="bgongl"><a href="http://www.developpez.com" class="ntdrub">Accueil<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://club.developpez.com" class="ntdrub">Le<br />Club</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://delphi.developpez.com" class="ntdrub">Delphi<br />Kylix</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://c.developpez.com" class="ntdrub">C<br />C++</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://java.developpez.com" class="ntdrub">Java<br />J2EE</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://dotnet.developpez.com" class="ntdrub">DotNET<br />&amp; C#</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://vb.developpez.com" class="ntdrub">Visual<br />Basic</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://access.developpez.com" class="ntdrub">Access<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://pascal.developpez.com" class="ntdrub">Pascal<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://web.developpez.com" class="ntdrub">Dev<br />Web</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://php.developpez.com" class="ntdrub">PHP<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://asp.developpez.com" class="ntdrub">ASP<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://xml.developpez.com" class="ntdrub">XML<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://uml.developpez.com" class="ntdrub">UML<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://sgbd.developpez.com" class="ntdrub">SQL<br />SGBD</a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://windows.developpez.com" class="ntdrub">Win<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://linux.developpez.com" class="ntdrub">Linux<br /></a></td>
								<td class="iongl"><img src="images/bord1.gif" /></td>
								<td class="bgongl"><a href="http://www.developpez.com/cours/" class="ntdrub">Autres<br /></a></td>
								<td class="iongl"><img src="images/bordd.gif" /></td>
							</tr>
						</table>
					</td>
				</tr>

				<tr>
					<td class="trbleu">
					</td>
				</tr>

				<tr valign="top">
					<td valign="top" class="fondart">
						<table cellspacing="1" width="100%" class="tbnoir">
							<tr>
								<td class="fondart">
									<table class="cadrearticle" width="90%" cellpadding="10" cellspacing="0">
										<tr>
											<td>

        <br><h1>Oracle PL/SQL</h1><p class="dateArticle">
        Date de publication : Avril 2004 , 
        Date de mise a jour : Juillet 2004</p><hr><div class="barreNavigation"> [ <a class="barreNavigationTexte" href="Chap6.html">Précédent</a> ]  [ <a class="barreNavigationTexte" href="sommaire.html">Sommaire</a> ]  [ <a class="barreNavigationTexte" href="Chap8.html">Suivant</a> ] </div><hr>
	
	
	
	
	
	
	<br /><a class="summaryIndent0" href="#L7">7. Le paquetage DBMS_OUTPUT</a>
		

	
	
<br><br>
	
	
	
	
	
	
	<br /><h2 class="TitreSection1"><a name="L7"></a>7. Le paquetage DBMS_OUTPUT</h2>
		
<div class="paragraph">
Les proc&eacute;dures de ce paquetage vous permettent d'&eacute;crire des lignes dans un tampon depuis un bloc PL/SQL anonyme, une proc&eacute;dure ou un d&eacute;clencheur.
<br /><br />
Le contenu de ce tampon est affich&eacute; &agrave; l'&eacute;cran lorsque le sous-programme ou le d&eacute;clencheur est termin&eacute;.
<br /><br />
L'utilit&eacute; principale est d'afficher &agrave; l'&eacute;cran des informations de trace ou de d&eacute;bogage
<br /><br />
<span class="important">La taille maximum du tampon est de un million de caract&egrave;res</span><br />
<span class="important">La taille maximum d'une ligne est de 255 caract&egrave;res</span>
<br /><br />
<u>La capacit&eacute; maximum d'une ligne &eacute;tant de 255 caract&egrave;res, voyez la proc&eacute;dure DEBUG, pr&eacute;sent&eacute;e au chapitre Fonctions et proc&eacute;dure, qui permet de s'affranchir de cette limitation</u>
<br /><br /><br /><br />
<b><u>Fonctions et proc&eacute;dures du paquetage</u></b>
<br /><br />
</div><br><a name="ENABLE"></a><div class="paragraph">
</div><br><ul type=""><li><b>DBMS_OUTPUT.ENABLE ( taille_tampon IN INTEGER DEFAULT 20000)</b></li></ul><div class="paragraph">
Cette proc&eacute;dure permet d'initialiser le tampon d'&eacute;criture et d'accepter les commandes de lecture et d'&eacute;criture dans ce tampon.
<br /><br />
<b>taille_tampon</b> repr&eacute;sente la taille maximum en octets allou&eacute;e au tampon.<br />
Les valeurs doivent &ecirc;tre indiqu&eacute;es dans une plage de valeur allant de 2000 (minimum) et 1 million (maximum). Sa valeur par d&eacute;faut est 20000.
<br /><br />
Exceptions g&eacute;n&eacute;r&eacute;es<br />
ORA-20000: Buffer overflow, limit of (buffer_limit) bytes.<br />
ORU-10027:
<br /><br />
</div><br><a name="DISABLE"></a><div class="paragraph">
</div><br><ul type=""><li><b>DBMS_OUTPUT.DISABLE</b></li></ul><div class="paragraph">
Cette proc&eacute;dure d&eacute;sactive les appels de lecture et &eacute;criture dans le tampon et purge ce dernier.
<br /><br />
<br /><br />
</div><br><a name="PUT"></a><div class="paragraph">
<b>Proc&eacute;dures d'&eacute;criture dans le tampon </b>
<br /><br />
</div><br><ul type=""><li><b>DBMS_OUTPUT.PUT (item IN NUMBER)</b></li>
<li><b>DBMS_OUTPUT.PUT (item IN VARCHAR2)</b></li>
<li><b>DBMS_OUTPUT.PUT (item IN DATE)</b></li></ul><div class="paragraph">
<br />
</div><br><ul type=""><li><b>DBMS_OUTPUT.PUT_LINE (item IN NUMBER)</b></li>
<li><b>DBMS_OUTPUT.PUT_LINE (item IN VARCHAR2)</b></li>
<li><b>DBMS_OUTPUT.PUT_LINE (item IN DATE)</b></li></ul><div class="paragraph">
<br />
</div><br><ul type=""><li><b>DBMS_OUTPUT.NEW_LINE</b></li></ul><div class="paragraph">
<b>item</b> repr&eacute;sente un litt&eacute;ral ou une variable
<br /><br />
<b>DBMS_OUTPUT.PUT</b> permet d'ajouter des informations dans la ligne en cours du tampon<br />
<b>DBMS_OUTPUT.PUT_LINE</b> permet de g&eacute;n&eacute;rer une ligne enti&egrave;re dans le tampon. Un caract&egrave;re fin de ligne  est automatiquement ajout&eacute; en fin de ligne
<br />
<b>DBMS_OUTPUT.NEW_LINE</b> permet d'ajouter au tampon un caract&egrave;re fin de ligne
<br /><br />
<u>Exceptions g&eacute;n&eacute;r&eacute;es</u>
<br />
ORA-20000 Buffer overflow, limit of (buf_limit) bytes.<br />
ORU-10027:<br />
<br /><br />
ORA-20000 Line length overflow, limit of 255 bytes per line.<br />
ORU-10028:
<br /><br />
<br /><br />
</div><br><a name="GET_LINE"></a><div class="paragraph">
<b><u>Proc&eacute;dures de lecture du tampon</u></b>
<br /><br />
</div><br><ul type=""><li><b>DBMS_OUTPUT.GET_LINE (ligne OUT VARCHAR2, statut OUT INTEGER)</b></li></ul><div class="paragraph">
<b>ligne</b> repr&eacute;sente une ligne du tampon retourn&eacute;e, &agrave; l'exclusion du caract&egrave;re NL final<br />
La longueur maximum de ligne est de 255 caract&egrave;res
<br /><br />
<b>statut</b> retourne la valeur 0 si la lecture s'est d&eacute;roul&eacute;e correctement et 1 s'il n'y a plus de lignes dans le tampon
<br /><br />
</div><br><ul type=""><li><b>DBMS_OUTPUT.GET_LINES (lignes OUT tableau_char, nombre_lignes IN OUT INTEGER)</b></li></ul><div class="paragraph">
<b>tableau_char</b> repr&eacute;sente un tableau de cha&icirc;nes de caract&egrave;res. La taille maximum de chaque ligne est de 255 caract&egrave;res
<br />
<b>nombre_lignes</b> en entr&eacute;e repr&eacute;sente le nombre de lignes du tampon que l'on souhaite lire.<br />
En sortie, il indique le nombre de lignes effectivement lues depuis le tampon
<br /><br />
Exemple
<br />
</div><br><pre class="code"><div class="ora_code"><span class="ora_keyword">SQL</span>&gt; <span class="ora_keyword">set</span> serveroutput <span class="ora_keyword">on</span>
<span class="ora_keyword">SQL</span>&gt; <span class="ora_keyword">Declare</span>
  2     <span class="ora_keyword">CURSOR</span> C_EMP <span class="ora_keyword">Is</span>
  3     <span class="ora_keyword">Select</span> * <span class="ora_keyword">From</span> EMP ;
  4  <span class="ora_keyword">Begin</span>
  5     <span class="ora_comment">-- Ouverture du tampon --</span>
  6     <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword"><span class="ora_keyword">ENABLE</span></span>( 1000000 ) ;
  7     <span class="ora_comment">-- Boucle sur la table EMP --</span>
  8     <span class="ora_keyword">For</span> C <span class="ora_keyword">in</span> C_EMP <span class="ora_keyword">Loop</span>
  9        <span class="ora_comment">-- Ligne avec caract&egrave;re fin de ligne --</span>
 10        <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword">PUT_LINE</span>( 'Employ&eacute; -&gt; ' || C.EMPNO ) ;
 11        <span class="ora_comment">-- Ligne compos&eacute;e de diff&eacute;rents champs --</span>
 12        <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword">PUT</span>( ' ' || 'Nom=' || C.ENAME ) ;
 13        <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword">PUT</span>( ' ' || 'Job=' || C.JOB ) ;
 14        <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword">PUT</span>( ' ' || 'Dept=' || C.DEPTNO ) ;
 15        <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword">PUT</span>( ' ' || 'Salaire=' || C.SAL ) ;
 16        <span class="ora_comment">-- Saut de ligne --</span>
 17        <span class="ora_keyword">DBMS_OUTPUT</span>.<span class="ora_keyword">NEW_LINE</span> ;         
 18     <span class="ora_keyword">End</span> <span class="ora_keyword">loop</span> ;
 19  <span class="ora_keyword">End</span> ;
 20  /
Employ&eacute; -&gt; 7369
Nom=SMITH Job=CLERK Dept=20 Salaire=880
Employ&eacute; -&gt; 7499
Nom=ALLEN Job=SALESMAN Dept=30 Salaire=1936
Employ&eacute; -&gt; 7521
Nom=WARD Job=SALESMAN Dept=30 Salaire=1375
Employ&eacute; -&gt; 7566
Nom=JONES Job=MANAGER Dept=20 Salaire=3273
...
Employ&eacute; -&gt; 9994
Nom=Schmoll Job=CLERK Dept=20 Salaire=2500

Proc&eacute;dure PL/<span class="ora_keyword">SQL</span> termin&eacute;e avec succ&egrave;s.

<span class="ora_keyword">SQL</span>&gt;</div></pre><div class="paragraph">
<span class="important">
Notez, sous Sql*Plus la commande SET SERVEROUTPUT ON qui permet de rendre actives les fonctions du paquetage DBMS_OUTPUT
</span>
</div><br>
	
	
<hr><div class="barreNavigation"> [ <a class="barreNavigationTexte" href="Chap6.html">Précédent</a> ]  [ <a class="barreNavigationTexte" href="sommaire.html">Sommaire</a> ]  [ <a class="barreNavigationTexte" href="Chap8.html">Suivant</a> ] </div><hr><p class="licence">Copyright &copy;2004&nbsp;SheikYerbouti.
            Aucune reproduction, même partielle, ne peut être faite
			de ce site et de l'ensemble de son contenu : textes, documents, images, etc
            sans l'autorisation expresse de l'auteur. Sinon vous encourez selon la loi jusqu'à 3 ans de prison et jusqu'à 300 000 E
			de dommages et intérets. Cette page est déposée à la <a href="http://www.sacd.fr/" target="_blank">SACD</a>.</p>
       											</td>
										</tr>
									</table>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>

	<tr>
		<td>
			<table width="100%" cellpadding="4" class="cachee">
				<tr bgcolor="#DDEEFF">
					<td align="center" class="titrepied">
			  Vos questions techniques : <b><a href="http://www.developpez.net/forums/" target="_blank">forum d'entraide Accueil</a></b> - Publiez vos articles, tutoriels et cours<br />
			  et rejoignez-nous dans l'&eacute;quipe de r&eacute;daction du club d'entraide des d&eacute;veloppeurs francophones <br /> <a href="http://club.developpez.com/contacts/">Nous contacter</a>
	
			  - Copyright 2000..2005 www.developpez.com
					</td>
					<td align="center">
          
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</body>
</html>

	